(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6719],{14285:function(e){"use strict";e.exports={getGlobalPrivyAuthUrl:()=>"https://auth.privy.io"}},99558:function(e,t,r){"use strict";var n=r(14285),a=r(34406);let o="cla04x0d00002nyb6oofp5dqh",i=a.env.VERCEL_GIT_COMMIT_SHA,s="97238FF8-F378-4218-98DF-B940C7AD8172";if("string"!=typeof o)throw Error("NEXT_PUBLIC_PRIVY_APP_ID needs to be defined");let c=(0,n.getGlobalPrivyAuthUrl)(),d="https://dashboard.privy.io";if(!d||"string"!=typeof d)throw Error("NEXT_PUBLIC_DASHBOARD_PRIVY_AUTH_URL must be defined");let l="https://dashboard.privy.io";l||console.warn("No Privy dashboard URL found, some dashboard admin actions like reporting to Slack will not work.");let u="https://1a1092d8126745b7b932d59dbcc3fc17@o4505001591177216.ingest.sentry.io/4505002745790464";if("string"!=typeof u)throw Error("Missing Sentry env vars");let f=parseFloat("0.05"),y=parseFloat("0"),w="4df5e2316331463a9130964bd6078dfa",v="fe9c30fc-3bc5-4064-91e2-6ab5887f8f4d";if("string"!=typeof w)throw Error("NEXT_PUBLIC_PRIVY_INFURA_ID must be set");if("string"!=typeof v)throw Error("NEXT_PUBLIC_PRIVY_BLAST_ID must be set");if("string"!=typeof s)throw Error("NEXT_PUBLIC_NEYNAR_API_KEY must be set");let p=Object.freeze({isTest:!1,isProduction:!0,isStaging:!1,isDevelopment:!1,PRIVY_APP_ID:o,PRIVY_ENV:"production",GLOBAL_PRIVY_AUTH_URL:c,DASHBOARD_PRIVY_AUTH_URL:d,DASHBOARD_URL:l,SENTRY_ENABLED:!0,SENTRY_DSN:u,SENTRY_SAMPLE_RATE:f,SENTRY_TRACES_SAMPLE_RATE:y,PRIVY_INFURA_ID:w,PRIVY_BLAST_ID:v,GIT_COMMIT_SHA:i,SPECIAL_EVENT_SIGNUP_ENABLED:!0,NEYNAR_API_KEY:s});t.Z=p},8934:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(98437),a=r(46396);class o extends a.u{set(e,t){let r=this.getWalletStorageKey(e),n={share:t.share,deviceId:t.deviceId};this._set(r,n)}get(e){let t=this.getWalletStorageKey(e);return this._get(t)}del(e){let t=this.getWalletStorageKey(e);this._del(t)}getWalletStorageKey(e){let{appId:t,userId:r,address:a}=e;return"privy_wallet:".concat(t,":").concat(r,":").concat((0,n.uc)(a)?(0,n.DY)(a):a)}constructor(e){super(e)}}let i=(()=>{try{if("undefined"!=typeof globalThis&&globalThis.localStorage){globalThis.localStorage.setItem("privy-storage-check","t");let e=globalThis.localStorage.getItem("privy-storage-check");if(globalThis.localStorage.removeItem("privy-storage-check"),"t"!==e)throw console.debug("Localstorage check failed"),Error("Unable to ping localStorage");return new o(globalThis.localStorage)}}catch(e){e instanceof DOMException&&"SecurityError"===e.name?console.debug("Security settings in your browser prevent access to local storage, used for persisting wallet state. Wallet information will be stored in-memory."):console.debug("Unknown issue loading local storage, used for persisting wallet state. Wallet information will be stored in-memory.")}return new o(new a.w)})();var s=i},90460:function(e,t,r){"use strict";r.d(t,{A:function(){return a}});let n=e=>!!e&&"object"==typeof e&&"response"in e&&!!e.response&&"object"==typeof e.response&&"data"in e.response&&!!e.response.data&&"object"==typeof e.response.data&&"code"in e.response.data&&"string"==typeof e.response.data.code,a=e=>n(e)&&"device_revoked"===e.response.data.code},49857:function(e,t,r){"use strict";r.d(t,{_r:function(){return g},ay:function(){return _},EK:function(){return h},YF:function(){return eE},no:function(){return eR},J9:function(){return A},IY:function(){return U},js:function(){return I},IA:function(){return eN}});var n=r(95253),a=r(10717),o=r.n(a),i=r(98437),s=r(68407),c=r(79489),d=r(90162);async function l(e,t){let{recoverySecret:r,filename:n}=t,a="recovery-secret-boundary",o="\r\n--".concat(a,"\r\n"),i=o+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify({name:n,mimeType:"text/plain",parents:["appDataFolder"]})+o+"Content-Type: text/plain\r\n\r\n"+r+"\r\n--".concat(a,"--"),s=await d.default.post("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",i,{headers:{"Content-Type":'multipart/related; boundary="'.concat(a,'"'),Authorization:"Bearer ".concat(e)}});return s.data.id}async function u(e,t){let{fileId:r}=t,n=await d.default.get("https://www.googleapis.com/drive/v3/files/".concat(r),{headers:{Authorization:"Bearer ".concat(e)},params:{alt:"media"},responseType:"text"});return n.data}let f={"user-passcode":"user_passcode_derived_recovery_key",privy:"privy_generated_recovery_key","google-drive":"google_drive_recovery_secret"};var y=r(8934),w=r(48834).Buffer;async function v(e){let{recoveryType:t}=e;if("user_passcode_derived_recovery_key"===t){let{recoveryPassword:r}=e,n=(0,i.a9)();return{encryptionKey:await (0,i.fq)(r,n),walletRecoveryOutput:{recoveryType:t,recoveryKeyDerivationSalt:n}}}if("privy_generated_recovery_key"===t){let e=await (0,i.eJ)();return{encryptionKey:e,walletRecoveryOutput:{recoveryType:t,encryptionKey:e}}}if("google_drive_recovery_secret"===t){var r,a,o;let s;let{recoveryAccessToken:d}=e,u=await (0,i.eJ)(),f=n.US.encode(await (0,i.Cw)(u)),y=(r=e.appId,a=e.userId,o=e.walletAddress,"privy-wallet-".concat(r,"-").concat(a,"-").concat((0,i.DY)(o),".txt"));try{s=await l(d,{recoverySecret:f,filename:y})}catch(e){throw new c.AY("error","Failed to write recovery secret to Google Drive")}return{encryptionKey:u,walletRecoveryOutput:{recoveryType:t,filename:y,fileId:s}}}throw Error("Unknown recovery type.")}async function p(e){let{recoveryType:t}=e;if("user_passcode_derived_recovery_key"===t){let{recoveryKeyDerivationSalt:t}=e;return{recovery_key_derivation_salt:n.US.encode(t)}}if("privy_generated_recovery_key"===t){let{encryptionKey:t}=e;return{recovery_key:n.US.encode(await (0,i.Cw)(t))}}if("google_drive_recovery_secret"===t){let{filename:t,fileId:r}=e;return{filename:t,file_id:r}}throw Error("Unknown recovery type: ".concat(t))}async function h(e){let{appId:t,userId:r,accessToken:a,recoveryPassword:o,recoveryMethod:d,recoveryAccessToken:l,recoveryPin:u}=e,w=o||u;if(void 0!==w&&!(0,i.pg)(w))throw new c.AY("invalid_request_arguments","Failed to create wallet: invalid recovery pin");let h=d?f[d]:void 0;h||(h=void 0!==w?"user_passcode_derived_recovery_key":"privy_generated_recovery_key");let{deviceShares:_,recoveryShares:g,wallet:m,rootNode:S}=await (0,i.Z9)(),[b,I]=_,[U,A]=g,P=function(e){let{recoveryType:t,appId:r,userId:n,walletAddress:a,recoveryPassword:o,recoveryAccessToken:i}=e;if("user_passcode_derived_recovery_key"===t){if(!o)throw new c.AY("invalid_request_arguments","Failed to create wallet: missing recovery password");if(i)throw new c.AY("invalid_request_arguments","Failed to create wallet: recovery access token should not be provided for user recovery secret protected wallets.");return{recoveryType:t,recoveryPassword:o}}if("privy_generated_recovery_key"===t){if(o)throw new c.AY("invalid_request_arguments","Failed to create wallet: recovery password should not be provided for privy generated recovery key wallets.");if(i)throw new c.AY("invalid_request_arguments","Failed to create wallet: recovery access token should not be provided for privy generated recovery key wallets.");return{recoveryType:t}}if("google_drive_recovery_secret"===t){if(!i)throw new c.AY("invalid_request_arguments","Failed to create wallet: missing recovery access token");if(o)throw new c.AY("invalid_request_arguments","Failed to create wallet: recovery password should not be provided for google drive recovery secret protected wallets.");return{recoveryType:t,recoveryAccessToken:i,appId:r,userId:n,walletAddress:a}}throw new c.AY("invalid_request_arguments","Failed to create wallet: unknown recovery type: ".concat(t))}({recoveryType:h,appId:t,userId:r,walletAddress:m.address,recoveryPassword:w,recoveryAccessToken:l}),[F,{encryptionKey:k,walletRecoveryOutput:E}]=await Promise.all([s.EK(t,a,m.address),v(P)]),[T,Y]=await Promise.all([(0,i.Ym)(k),(0,i.pJ)(U,k)]),x=(0,i.C8)(window.location.host,window.location.origin,m.address,F),R=await m.signMessage(x),N=(0,i.b_)(),K=await p(E);return await s.TO(t,a,{chain_type:"ethereum",message:x,signature:R,device_id:N,device_auth_share:n.US.encode(I),recovery_auth_share:n.US.encode(A),encrypted_recovery_share:n.US.encode(Y.encryptedShare),encrypted_recovery_share_iv:n.US.encode(Y.encryptedShareIV),recovery_type:h,recovery_key_hash:n.US.encode(T),...K}),y.Z.set({appId:t,userId:r,address:m.address},{share:n.US.encode(b),deviceId:N}),{wallet:m,rootNode:S,walletIndex:0}}async function _(e){let{appId:t,userId:r,accessToken:a}=e,{deviceShares:c,recoveryShares:d,keypair:l}=await (0,i.Vr)(),u=l.publicKey.toBase58(),[f,h]=c,[_,g]=d,[m,{encryptionKey:S,walletRecoveryOutput:b}]=await Promise.all([s.Tl(t,a,u),v({recoveryType:"privy_generated_recovery_key"})]),[I,U]=await Promise.all([(0,i.Ym)(S),(0,i.pJ)(_,S)]),A=(0,i.z9)(window.location.host,window.location.origin,u,m),P=o().sign.detached(w.from(A),l.secretKey),F=n.US.encode(w.from(P)),k=(0,i.b_)(),{recovery_key:E}=await p(b);return await s.TO(t,a,{chain_type:"solana",message:A,signature:F,device_id:k,device_auth_share:n.US.encode(h),recovery_auth_share:n.US.encode(g),encrypted_recovery_share:n.US.encode(U.encryptedShare),encrypted_recovery_share_iv:n.US.encode(U.encryptedShareIV),recovery_type:"privy_generated_recovery_key",recovery_key_hash:n.US.encode(I),recovery_key:E}),y.Z.set({appId:t,userId:r,address:u},{share:n.US.encode(f),deviceId:k}),{keypair:l}}async function g(e,t,r,n){if(r.hdWalletIndex<=0)throw new c.AY("invalid_request_arguments","Failed to create additional wallet: invalid wallet index");let a=(0,i.ub)(n,r.hdWalletIndex),o=await s.EK(e,t,a.address),d=(0,i.C8)(window.location.host,window.location.origin,a.address,o),l=await a.signMessage(d);return await s.kR(e,t,(0,i.ub)(n,0).address,{message:d,signature:l,hd_node_index:r.hdWalletIndex}),a}var m=r(90460);async function S(e){let t,{appId:r,userId:a,accessToken:o,primaryAddress:c,walletIndex:d,mfaToken:l}=e,u={appId:r,userId:a,address:c},f=y.Z.get(u);if(!f)return null;let{share:w}=f;try{let{share:e}=await s.dq(r,o,c,f.deviceId,l);t=e}catch(e){if((0,m.A)(e))return y.Z.del(u),null;throw e}try{let e=await (0,i.Ks)({shares:[n.US.decode(w),n.US.decode(t)],primaryAddress:c,walletIndex:d});return e}catch(e){return y.Z.del(u),null}}var b=r(7186);async function I(e){var t;let{cachedWallet:r,appId:n,userId:a,primaryAddress:o,walletIndex:d,accessToken:l,mfaCode:u,mfaMethod:f}=e;if(!(0,i.uc)(o))throw new c.AY("invalid_request_arguments","Failed to initialize wallet: missing or invalid wallet address");let y=null===(t=b.Z.get({appId:n,userId:a}))||void 0===t?void 0:t.token;if(u&&f)try{let e=await s.bf(n,l,f,u);b.Z.set({appId:n,userId:a},e),y=e.token}catch(e){throw new c.AY("missing_or_invalid_mfa","MFA verification failed")}if(r&&!y&&(0,i.R6)((0,i.LY)(r.rootNode,0).address,o)){if(r.walletIndex===d)return r;{let e=(0,i.ub)(r.rootNode,d);return{rootNode:r.rootNode,wallet:e,walletIndex:d}}}let w=await S({appId:n,userId:a,accessToken:l,primaryAddress:o,walletIndex:d,mfaToken:null!=y?y:null});if(!w)throw new c.AY("wallet_not_on_device","Failed to initialize wallet: wallet with address '".concat(o,"' not loaded on this device"));return w}async function U(e){let t,{appId:r,userId:a,accessToken:o,data:d}=e,{address:l,recoveryAccessToken:f}=d,w=d.recoveryPassword||d.recoveryPin;if(!(0,i.uc)(l))throw new c.AY("invalid_request_arguments","Failed to recover wallet: missing or invalid wallet address");if(void 0!==w&&!(0,i.pg)(w))throw new c.AY("invalid_request_arguments","Failed to recover wallet: invalid recovery pin");let v=await P({appId:r,userId:a,accessToken:o,mfaMethod:d.mfaMethod,mfaCode:d.mfaCode}),{recovery_type:p,recovery_key_derivation_salt:h,recovery_code:_,recovery_key:g,file_id:m}=await s.wt(r,o,l,"ethereum");if("user_passcode_derived_recovery_key"===p){if(!w)throw new c.AY("error","Failed to recover wallet: user passcode required and none found");if(!h)throw new c.AY("error","Failed to recover wallet: cannot retrieve salt for user-supplied passcode derived wallet");t=await (0,i.fq)(w,n.US.decode(h))}else if("privy_passcode_derived_recovery_key"===p){if(!h)throw new c.AY("error","Failed to recover wallet: cannot retrieve salt for Privy-supplied passcode derived wallet");if(!_)throw new c.AY("error","Failed to recover wallet: cannot retrieve Privy-supplied passcode");t=await (0,i.fq)(_,n.US.decode(h))}else if("privy_generated_recovery_key"===p){if(!g)throw new c.AY("error","Failed to recover wallet: cannot retrieve Privy-generated recovery key");t=await (0,i.wV)(n.US.decode(g))}else if("google_drive_recovery_secret"===p){let e;if(!m)throw new c.AY("error","Failed to recover wallet: cannot retrieve fileId for Google Drive recovery secret derived recovery key");if(!f)throw new c.AY("error","Failed to recover wallet: missing recovery auth access token");try{e=await u(f,{fileId:m})}catch(e){throw new c.AY("error","Failed to recover wallet: failed to read recovery code from Google Drive")}if(!e)throw new c.AY("error","Failed to recover wallet: missing recovery secret from Google Drive");t=await (0,i.wV)(n.US.decode(e))}if(!t)throw new c.AY("error","Failed to recover wallet recovery key");let S=await (0,i.Ym)(t),{recoveryAuthShare:b,encryptedRecoveryShare:I,encryptedRecoveryShareIV:U}=await F({appId:r,accessToken:o,address:l,recoveryKeyHash:n.US.encode(S),mfaToken:v,chainType:"ethereum"}),A=await (0,i.tN)(n.US.decode(I),n.US.decode(U),t),k=await (0,i.Ks)({shares:[A,n.US.decode(b)],primaryAddress:l,walletIndex:0}),[E,T]=await (0,i.Uz)(k.wallet),Y=(0,i.b_)();return await s.Uu(r,o,l,Y,n.US.encode(T),"ethereum"),y.Z.set({appId:r,userId:a,address:l},{share:n.US.encode(E),deviceId:Y}),k}async function A(e){let{appId:t,userId:r,accessToken:a,publicKey:o}=e,{recovery_key:d}=await s.wt(t,a,o,"solana");if(!d)throw new c.AY("error","Failed to recover wallet: cannot retrieve Privy-generated recovery key");let l=await (0,i.wV)(n.US.decode(d));if(!l)throw new c.AY("error","Failed to recover wallet recovery key");let u=await (0,i.Ym)(l),{recoveryAuthShare:f,encryptedRecoveryShare:w,encryptedRecoveryShareIV:v}=await F({appId:t,accessToken:a,address:o,recoveryKeyHash:n.US.encode(u),mfaToken:null,chainType:"solana"}),p=await (0,i.tN)(n.US.decode(w),n.US.decode(v),l),{reconstructedKeypair:h,reconstructedEntropy:_}=await (0,i.MU)({shares:[p,n.US.decode(f)],expectedPublicKey:o}),[g,m]=await (0,i.AE)(_),S=(0,i.b_)();return await s.Uu(t,a,o,S,n.US.encode(m),"solana"),y.Z.set({appId:t,userId:r,address:o},{share:n.US.encode(g),deviceId:S}),{keypair:h}}async function P(e){let{appId:t,userId:r,accessToken:n,mfaMethod:a,mfaCode:o}=e;if(!a||!o)return null;try{let e=await s.bf(t,n,a,o);return b.Z.set({appId:t,userId:r},e),e.token}catch(e){throw new c.AY("missing_or_invalid_mfa","MFA verification failed")}}async function F(e){let{appId:t,accessToken:r,address:n,recoveryKeyHash:a,mfaToken:o,chainType:i}=e;try{let[e,c]=await Promise.all([s.q9(t,r,n,o,i),s.OK(t,r,n,a,i)]);return{recoveryAuthShare:e.share,encryptedRecoveryShare:c.encrypted_recovery_share,encryptedRecoveryShareIV:c.encrypted_recovery_share_iv}}catch(e){var d;if((null==e?void 0:null===(d=e.response)||void 0===d?void 0:d.status)===422)throw new c.AY("invalid_recovery_pin","Failed to recover wallet: invalid recovery pin");throw new c.AY("error","Failed to recover wallet: unknown error")}}var k=r(50539),E=r(75388),T=r(1890),Y=r(58105),x=r(77962);let R=[E.yu.id,E.v8.id],N=e=>({maxPriorityFee:(0,x.parseUnits)(e.maxPriorityFee.toFixed(9),"gwei").toHexString(),maxFee:(0,x.parseUnits)(e.maxFee.toFixed(9),"gwei").toHexString()}),K=e=>({safeLow:N(e.safeLow),standard:N(e.standard),fast:N(e.fast)}),D=async e=>{let t="";switch(e){case E.yu.id:t="https://gasstation.polygon.technology/v2";break;case E.v8.id:t="https://gasstation-testnet.polygon.technology/v2";break;default:throw Error("chainId ".concat(e," does not support polygon gas stations"))}let r=await fetch(t),n=await r.json();return K(n)},C=["eth_sign","eth_populateTransactionRequest","eth_signTransaction","eth_sendTransaction","personal_sign","eth_signTypedData_v4"];var L=r(43210),M=r(57122),q=r(86900),G=r(56334),O=r(42622),B=r(7301),V=r(26389),Z=r(43194),J=r(60586),z=r(188),H=r(8581),W=r(6728),j=r(6891),$=r(35194),X=r(13141),Q=r(66403),ee=r(67924),et=r(80304),er=r(98494),en=r(99336),ea=r(63468),eo=r(52961),ei=r(57393),es=r(57924),ec=r(7735),ed=r(63441),el=r(3884),eu=r(99558),ef=r(15307);let ey={[L.y.id]:L.y,[M.J.id]:M.J,[q.Z.id]:q.Z,[G.p.id]:G.p,[O.c.id]:O.c,[B.u.id]:B.u,[V.J.id]:V.J,[Z.L.id]:Z.L,[J.D.id]:J.D,[z.$.id]:z.$,[H.y.id]:H.y,[W.J.id]:W.J,[j.w.id]:j.w,[$.F.id]:$.F,[X.M.id]:X.M,[Q.R.id]:Q.R,[ee.P.id]:ee.P,[et.S.id]:et.S,[er.v.id]:er.v,[en.l.id]:en.l,[ea.O.id]:ea.O,[eo.y.id]:eo.y,[ei.v.id]:ei.v,[es.v.id]:es.v,[ec.l.id]:ec.l,[ed.f.id]:ed.f,[el.N.id]:el.N},ew={8453:"https://base-mainnet.blastapi.io",84531:"https://base-goerli.blastapi.io"},ev=e=>{let t=ey[e];if(!t)throw Error("Unsupported chainId ".concat(e));return t},ep=e=>{var t,r;let n;let a=ev(e);if(null===(t=a.rpcUrls.infura)||void 0===t?void 0:t.http[0]){if(!eu.Z.PRIVY_INFURA_ID)throw Error("Missing Infura ID for RPC URL");n=(0,ef.vE)(a.rpcUrls.infura.http[0],eu.Z.PRIVY_INFURA_ID)}else if(ew[e]){if(!eu.Z.PRIVY_BLAST_ID)throw Error("Missing Blast ID for RPC URL");n=(0,ef.vE)(ew[e],eu.Z.PRIVY_BLAST_ID)}else n=null===(r=a.rpcUrls.default)||void 0===r?void 0:r.http[0];if(!n)throw Error("No RPC url found for ".concat(e));return n};var eh=r(48834).Buffer;function e_(e){let t=e.chainId||E.RJ.id,r=ep(t);return new T.cK(r)}function eg(e){let t="string"==typeof e?JSON.parse(e):e;return void 0!==t.chainId?{...t,chainId:Number(t.chainId)}:t}function em(e){return(0,Y.isHexString)(e)?eh.from(e.slice(2),"hex"):eh.from(e)}async function eS(e,t,r){return eF(e.address,t),(0,k.personalSign)({privateKey:em(e.privateKey),data:r})}async function eb(e,t,r,n){return eF(e.address,t),(0,k.signTypedData)({data:r,privateKey:em(e.privateKey),version:n})}async function eI(e,t){let{method:r,params:n}=t;if(!C.includes(r))throw Error("Unsupported JSON RPC method: ".concat(r));switch(r){case"personal_sign":{let t=await eS(e,n[1],n[0]);return{method:r,data:t}}case"eth_populateTransactionRequest":{let t=eg(n[0]),a=await eA(e,t);return{method:r,data:a}}case"eth_sign":{eF(e.address,n[0]);let t=await e.signMessage(n[1]);return{method:r,data:t}}case"eth_signTypedData_v4":{let t=function(e){if("string"!=typeof e)return e;try{let t=JSON.parse(e);return void 0!==t.domain.chainId&&(t.domain.chainId=Number(t.domain.chainId)),t}catch(e){throw Error("Failed to deserialize message with error: ".concat(e))}}(n[1]),a=await eb(e,n[0],t,k.SignTypedDataVersion.V4);return{method:r,data:a}}case"eth_signTransaction":{let t=eg(n[0]),a=await e.signTransaction(t);return{method:r,data:a}}case"eth_sendTransaction":{let t=eg(n[0]),a=await eU(e,t);return{method:r,data:a}}}}async function eU(e,t){try{let r=await eA(e,t);!function(e){for(let t of["gasLimit","gasPrice","value","maxPriorityFeePerGas","maxFeePerGas"]){let r=e[t];if(void 0!==r){if(!function(e){let t="number"==typeof e,r="bigint"==typeof e,n="string"==typeof e&&(0,Y.isHexString)(e);return t||r||n}(r))throw Error("Transaction request property '".concat(t,"' must be a valid number, bigint, or hex string representing a quantity"));if("number"!=typeof e.chainId)throw Error("Transaction request property 'chainId' must be a number")}}}(r);let n=e_(r),a=e.connect(n),{hash:o}=await a.sendTransaction(r);return o}catch(e){throw eP(e)}}async function eA(e,t){let r=e_(t),n=e.connect(r);try{if(t.gas&&(t.gasLimit=t.gas,delete t.gas),t.chainId&&R.includes(t.chainId)&&(!t.maxPriorityFeePerGas||!t.maxFeePerGas))try{let{standard:e}=await D(t.chainId);t.maxPriorityFeePerGas||(t.maxPriorityFeePerGas=e.maxPriorityFee),t.maxFeePerGas||(t.maxFeePerGas=e.maxFee)}catch(e){throw Error("Failed to set gas prices from Polygon gas station with error: ".concat(e,"."))}let e=await n.populateTransaction({to:t.to,from:t.from,nonce:t.nonce,gasLimit:t.gasLimit,gasPrice:t.gasPrice,data:t.data,value:t.value,chainId:t.chainId,type:t.type,accessList:t.accessList,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});return function(e){let t={};return void 0!==e.to&&(t.to=e.to),void 0!==e.data&&(t.data=e.data),void 0!==e.chainId&&(t.chainId=e.chainId),void 0!==e.type&&(t.type=e.type),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.nonce&&(t.nonce=ek(e.nonce)),void 0!==e.gasLimit&&(t.gasLimit=ek(e.gasLimit)),void 0!==e.gasPrice&&(t.gasPrice=ek(e.gasPrice)),void 0!==e.value&&(t.value=ek(e.value)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=ek(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=ek(e.maxPriorityFeePerGas)),t}(e)}catch(e){throw eP(e)}}function eP(e){let t=e.code,r=e.reason;return"INSUFFICIENT_FUNDS"===t?new c.AY("insufficient_funds","Wallet has insufficient funds for this transaction"):r?new c.AY("error",r):"string"==typeof e?Error(e):e}function eF(e,t){if(!(0,i.R6)(e,t))throw Error("Signer ".concat(e," can not sign on behalf of ").concat(t))}function ek(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)return e;if("function"==typeof e.toHexString)return e.toHexString();throw Error("Expected numeric value but received ".concat(e))}function eE(e,t){let{address:r,request:n}=t;if(!(0,i.uc)(r))throw new c.AY("invalid_request_arguments","Failed to service JSON RPC request: missing or invalid wallet address");return eI(e,n)}var eT=r(48834).Buffer;async function eY(e,t,r){!function(e,t){if(e.toString()!==t)throw Error("Signer ".concat(e.toBase58()," cannot sign on behalf of ").concat(t))}(e.publicKey,t);let n=eT.from(r,"base64");try{let t=o().sign.detached(n,e.secretKey),r=eT.from(t).toString("base64");return r}catch(e){throw console.error(e),e}}async function ex(e,t,r){let{method:n,params:a}=t;if("signMessage"===n){let t=await eY(e,r,a.message);return{method:n,data:{signature:t}}}throw Error("Unsupported method: ".concat(n))}function eR(e,t){let{request:r,publicKey:n}=t;return ex(e,r,n)}async function eN(e){let{appId:t,userId:r,accessToken:a,wallet:o,data:{recoveryPassword:d}}=e;if(!(0,i.pg)(d))throw new c.AY("invalid_request_arguments","Failed to set recovery password: missing or invalid recovery password");let l=y.Z.get({appId:t,userId:r,address:o.address});if(!l)throw new c.AY("wallet_not_on_device","Failed to initialize wallet: wallet with address '".concat(o.address,"' not loaded on this device"));let[u,f]=await Promise.all([(0,i.Uz)(o),(0,i.Uz)(o)]),[w,v]=u,[p,h]=f,{wallet:_}=await (0,i.Ks)({shares:[p,h],primaryAddress:o.address,walletIndex:0}),g=(0,i.a9)(),[m,S]=await Promise.all([s.EK(t,a,_.address),(0,i.fq)(d,g)]),[b,I]=await Promise.all([(0,i.Ym)(S),(0,i.pJ)(p,S)]),U=(0,i.C8)(window.location.host,window.location.origin,_.address,m),A=await _.signMessage(U);return await s.oB(t,a,{message:U,signature:A,device_id:l.deviceId,device_auth_share:n.US.encode(v),recovery_auth_share:n.US.encode(h),encrypted_recovery_share:n.US.encode(I.encryptedShare),encrypted_recovery_share_iv:n.US.encode(I.encryptedShareIV),recovery_key_hash:n.US.encode(b),recovery_key_derivation_salt:n.US.encode(g)}),y.Z.set({appId:t,userId:r,address:_.address},{share:n.US.encode(w),deviceId:l.deviceId}),_}},7186:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(46396);class a extends n.u{set(e,t){let r=this.getMfaTokenStorageKey(e);this._set(r,t)}get(e){let t=this.getMfaTokenStorageKey(e);return this._get(t)}del(e){let t=this.getMfaTokenStorageKey(e);this._del(t)}getMfaTokenStorageKey(e){let{appId:t,userId:r}=e;return"privy:mfa:".concat(t,":").concat(r)}constructor(e){super(e)}}let o=(()=>{try{if("undefined"!=typeof globalThis&&globalThis.localStorage)return new a(globalThis.localStorage)}catch(e){e instanceof DOMException&&"SecurityError"===e.name?console.debug("Security settings in your browser prevent access to local storage, used for persisting wallet state. Wallet information will be stored in-memory."):console.debug("Unknown issue loading local storage, used for persisting wallet state. Wallet information will be stored in-memory.")}return new a(new n.w)})();var i=o},46686:function(e,t,r){"use strict";r.d(t,{_:function(){return a},r:function(){return o}});var n=r(40620);function a(e,t){return n.Us(new URL("/api/v1/apps/".concat(e,"/jwks.json"),t))}async function o(e,t,r){if(!e)return null;try{var a;let o=await n._f(e,t,{typ:"JWT",algorithms:["ES256"],issuer:"privy.io",audience:r}),i=(a=o.payload.sub,"string"==typeof a&&/^did:privy:.+/.test(a)?a.replace(/^did:privy:/,""):null);if(!i)return null;return{userId:i,appId:r}}catch(e){return null}}},68407:function(e,t,r){"use strict";r.d(t,{E2:function(){return w},EK:function(){return a},F5:function(){return g},GH:function(){return h},J_:function(){return p},Mc:function(){return _},NO:function(){return m},OK:function(){return f},P3:function(){return U},TO:function(){return i},Tl:function(){return o},Uu:function(){return y},bf:function(){return I},dq:function(){return d},kR:function(){return s},ls:function(){return v},oB:function(){return c},q9:function(){return l},wt:function(){return u}});var n=r(90162);async function a(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets/init",{address:r},A(e,t));return a.data.nonce}async function o(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets/init",{address:r,chain_type:"solana"},A(e,t));return a.data.nonce}async function i(e,t,r){let a=await n.default.post("/api/v1/embedded_wallets",r,A(e,t));return a.data}async function s(e,t,r,a){let o=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/add_wallet"),a,A(e,t));return o.data}async function c(e,t,r){let a=await n.default.patch("/api/v1/embedded_wallets",r,A(e,t));return a.data}async function d(e,t,r,a,o,i){let s=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/share"),{device_id:a,chain_type:i},A(e,t,o));return s.data}async function l(e,t,r,a,o){let i=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/auth_share"),{chain_type:o},A(e,t,a));return i.data}async function u(e,t,r,a){let o=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/key_material"),{chain_type:a},A(e,t));return o.data}async function f(e,t,r,a,o){let i=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/shares"),{recovery_key_hash:a,chain_type:o},A(e,t));return i.data}async function y(e,t,r,a,o,i){let s=await n.default.post("/api/v1/embedded_wallets/".concat(r,"/recovery/device"),{device_id:a,device_auth_share:o,chain_type:i},A(e,t));return s.data}function w(e,t,r,a,o,i){n.default.post("/api/v1/analytics_events",{event_name:a,client_id:r,payload:{...o||{},clientTimestamp:i?i.toISOString():new Date().toISOString()}},A(e,t)).catch()}async function v(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/init",{action:"enroll"},A(e,t,r));return a.data}async function p(e,t,r,a){let o=await n.default.post("/api/v1/mfa/passwordless_sms/init",{phoneNumber:r,action:"enroll"},A(e,t,a));return o.data}async function h(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/enroll",{code:r},A(e,t));return a.data}async function _(e,t,r,a){let o=await n.default.post("/api/v1/mfa/passwordless_sms/enroll",{phoneNumber:a,code:r},A(e,t));return o.data}async function g(e,t,r){let a=await n.default.post("/api/v1/mfa/passwordless_sms/unenroll",{},A(e,t,r));return a.data}async function m(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/unenroll",{},A(e,t,r));return a.data}async function S(e,t,r){let a=await n.default.post("/api/v1/mfa/passwordless_sms/verify",{code:r},A(e,t));return a.data}async function b(e,t,r){let a=await n.default.post("/api/v1/mfa/totp/verify",{code:r},A(e,t));return a.data}async function I(e,t,r,n){switch(r){case"sms":return await S(e,t,n);case"totp":return await b(e,t,n);default:throw Error("Unknown mfa method: ".concat(r))}}async function U(e,t,r){let a=await n.default.post("/api/v1/farcaster/signer/init",{ed25519_public_key:t},A(e,r.accessToken,r.mfaToken));return a.data}function A(e,t,r){return{headers:{"privy-app-id":e,authorization:"Bearer ".concat(t),...r?{"privy-mfa-token":r}:{}},withCredentials:!0}}},79489:function(e,t,r){"use strict";r.d(t,{AY:function(){return o},d2:function(){return i},u$:function(){return a}});let n=["error","invalid_request_arguments","wallet_not_on_device","invalid_recovery_pin","insufficient_funds","missing_or_invalid_mfa","twilio_verification_failed"],a="error";class o extends Error{constructor(e,t){super(t),this.type=e}}function i(e){let t=e.type;return"string"==typeof t&&n.includes(t)}},46396:function(e,t,r){"use strict";r.d(t,{u:function(){return a},w:function(){return n}});class n{get length(){return Object.keys(this.data).length}getItem(e){let t=this.data[e];return void 0!==t?t:null}setItem(e,t){this.data[e]=String(t)}removeItem(e){delete this.data[e]}clear(){this.data={}}constructor(){this.data={}}}class a{_set(e,t){this.storage.setItem(e,JSON.stringify(t))}_get(e){let t=this.storage.getItem(e);if("string"!=typeof t)return null;try{return JSON.parse(t)}catch(t){return this.storage.removeItem(e),null}}_del(e){this.storage.removeItem(e)}constructor(e){this.storage=e}}},98437:function(e,t,r){"use strict";r.d(t,{AE:function(){return E},B0:function(){return g},C8:function(){return T},Cw:function(){return D},DY:function(){return m},Ks:function(){return b},LY:function(){return P},MU:function(){return U},R6:function(){return S},Uz:function(){return k},Vr:function(){return h},Ym:function(){return L},Z9:function(){return p},a9:function(){return x},b_:function(){return R},eJ:function(){return K},fq:function(){return N},pJ:function(){return M},pg:function(){return w},tN:function(){return q},ub:function(){return A},uc:function(){return _},wV:function(){return C},z9:function(){return Y}});var n=r(95253),a=r(27158),o=r(61),i=r(58194),s=r(14205),c=r(75398),d=r(58105),l=r(34384),u=r(10419),f=r(48834).Buffer;function y(e){return crypto.getRandomValues(new Uint8Array(e))}function w(e){return"string"==typeof e&&/^[a-zA-Z0-9!@#$%^&*()\-_+.]{6,}$/.test(e)}async function v(e){let t=await E(e),r=await E(e);return{deviceShares:t,recoveryShares:r}}async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;if(![128,160,192,224,256].includes(e))throw Error("invalid entropy size");let t=y(e/8),{deviceShares:r,recoveryShares:n}=await v(t),a=F(t),o=A(a,0);return{deviceShares:r,recoveryShares:n,wallet:o,rootNode:a}}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;if(![256].includes(e))throw Error("invalid entropy size");let t=y(e/8),{deviceShares:r,recoveryShares:n}=await v(t),a=I(t);return{deviceShares:r,recoveryShares:n,keypair:a,entropy:t}}function _(e){return i.isAddress(e)}function g(e){try{let t=new a.nh(e);return a.nh.isOnCurve(t)}catch(e){return!1}}function m(e){return i.getAddress(e)}function S(e,t){return m(e)===m(t)}async function b(e){let{shares:t,primaryAddress:r,walletIndex:n}=e,a=await (0,u.$)(t),o=F(a),i=P(o,0),s=A(o,n);if(!S(i.address,r))throw Error("Failed to reconstruct the expected wallet from Shamir shares");return{rootNode:o,wallet:s,walletIndex:n}}function I(e){let t=l.BW.fromMasterSeed(f.from(e).toString("hex"));return a.RG.fromSeed(t.derive("m/44'/501'/".concat(0,"'/0'")).privateKey)}async function U(e){let{shares:t,expectedPublicKey:r}=e,n=await (0,u.$)(t),a=I(n);if(a.publicKey.toBase58()!==r)throw Error("Failed to reconstruct the expected public key from Shamir shares.");return{reconstructedKeypair:a,reconstructedEntropy:n}}function A(e,t){return new o.Wallet(P(e,t))}function P(e,t){return e.derivePath("m/44'/60'/0'/0/".concat(t))}function F(e){let t=s.entropyToMnemonic(e);return d.HDNode.fromMnemonic(t)}function k(e){if(!e.mnemonic)throw Error("Failed to get entropy. Missing Mnemonic");let t=s.mnemonicToEntropy(e.mnemonic.phrase),r=c.arrayify(t);return E(r)}function E(e){return(0,u.V)(e,2,2)}function T(e,t,r,n){return"".concat(e," wants you to sign in with your Ethereum account:\n").concat(r,"\n\nYou are proving you own ").concat(r,".\n\nURI: ").concat(t,"\nVersion: 1\nChain ID: 1\nNonce: ").concat(n,"\nIssued At: ").concat(new Date().toISOString(),"\nResources:\n- https://privy.io")}function Y(e,t,r,n){return"".concat(e," wants you to sign in with your Solana account:\n").concat(r,"\n\nYou are proving you own ").concat(r,".\n\nURI: ").concat(t,"\nVersion: 1\nChain ID: mainnet\nNonce: ").concat(n,"\nIssued At: ").concat(new Date().toISOString(),"\nResources:\n- https://privy.io")}function x(){return y(32)}function R(){return n.Jq.encode(y(16))}function N(e,t){return G(new TextEncoder().encode(e),t)}function K(){return crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function D(e){return new Uint8Array(await crypto.subtle.exportKey("raw",e))}function C(e){return crypto.subtle.importKey("raw",e,"AES-GCM",!0,["encrypt","decrypt"])}async function L(e){let t=await crypto.subtle.exportKey("raw",e),r=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(r)}async function M(e,t){let r=y(12),n=await O(e,r,t);return{encryptedShare:n,encryptedShareIV:r}}function q(e,t,r){return B(e,t,r)}async function G(e,t){if(32!==t.byteLength)throw Error("pbkdf2 salt length should be 32 bytes");let r=await crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"PBKDF2",salt:t,hash:"SHA-512",iterations:21e5},r,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}async function O(e,t,r){let n=await crypto.subtle.encrypt({iv:t,name:"AES-GCM"},r,e);return new Uint8Array(n)}async function B(e,t,r){let n=await crypto.subtle.decrypt({iv:t,name:"AES-GCM"},r,e);return new Uint8Array(n)}},15307:function(e,t,r){"use strict";function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}r.d(t,{R1:function(){return o},fm:function(){return n},oH:function(){return i},p6:function(){return a},vE:function(){return s}});let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{weekday:"long",year:"numeric",month:"short",day:"numeric"};return new Date(1e3*e).toLocaleDateString("en-us",t)},o=e=>{if(!e)return"";let t=e.slice(0,5),r=e.slice(e.length-4,e.length);return"".concat(t,"...").concat(r)},i=e=>!!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.endsWith("/")?e:"".concat(e,"/"),a=new URL(t,n);for(let[e,t]of Object.entries(r))a.searchParams.set(e,t);return a.href}},29005:function(){},45179:function(){},31993:function(){},33196:function(){},50787:function(){},98819:function(){},66396:function(){},85338:function(){}}]);